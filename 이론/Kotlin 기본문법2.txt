* Kotlin 기본문법 2


9. data class (객체 만들기 DTOs)

- 	Java에서는 직접 get과 set을 구현해야 하지만,
	Kotlin에서는 자동으로 생성된다. 

// Java
Public class Sample() {
	private String name;
	private String email;
	
	public void setName(String name) {
		this.name = name;
	}
	public String getName() {
		return name;
	}
	public void setEmail(String email) {
		this.email = email;
	}
	public String getEmail() {
		return email;
	}
}
Sample sample = new Sample("Name", "a@a.c");

// Kotlin

// val = read_only
data class Sample(val name: String, val email: String)
// val이면서 notNull 이므로 2개 키워드 모두 초기화 필요
val sample: Sample = Sample("aaa", "a@t.c")
// val이기 때문에 get(접근)만 가능
sample.email
sample.name

// var = read/write
data class Sample(var name: String, var email: String)
// var은 그냥 data class이기 때문에 get/set 모두 가능
var sample: Sample = Sample("aaa", "a@t.c")

- 코틀린 data 클래스 생성자에는 최고 한 개 이상의 값이 있어야 한다. 
- 하지만 data 키워드를 제외해서 구현할 수도 있다. 
// data 키워드 o
data class Sample(var abc: String) {
	var name: String = ""
	var email : String = ""
}
// data 키워드 x
class Sample() {
	var abc : String = ""
	var name : String = ""
	var email : String = ""
}


10. 함수 기본값 정의(초기화)

// Java
public void add(String name) {
	add(name, "default");
}
public void add(String name, String email) {
	//...
}

// Kotlin
fun add(name : String, email : String = "default") {
	//...
}
- name은 반드시 String 타입으로 초기화를 해주어야 하고,
- email은 초기화하지 않는 경우 자동으로 "default"로 초기화 됨.


11. for문에 필터 걸기

// Java
for (Integer integer : list) {
	if (integer > 5) {
		integer *=2;
		Log.e("TAG", "Index " + integer);
	}
}

// Kotlin
list.filter {it > 5}.map { Log.d("TAG", "index " + (it * 2)) }
* filter
- returns a list containing only elements matching the given [predicate].
- 주어진 필터에 맞는 리스트 원소들만 반환
* map
- returns a list containing the results of applying the given [transform]
function to each element in the original collection.
- 원본 각 요소에 [transform] 기능이 적용된 결과를 포함하는 리스트를 반환.



12. Kotlin의 null 처리

// List에 null이 포함될 수 있음
// if문을 이용하여 찾을 수도 있고, filterNotNull이라는 키워드를 사용해도 됨.
// filterNotNull 키워드를 사용하여 null값 제외한 새로운 List 생성.
val list2 : List<Int?> = listOf(1,2,null, 3,4,5)
val intList: List<Int> = list2.filterNotNull()
intList.map { Log.d("TAG", "NotNull it " + it) }
// 출력 결과
/*
filterNotNull it 1
filterNotNull it 2
filterNotNull it 3
filterNotNull it 4
filterNotNull it 5
*/

// filterNot 키워드를 이용하는 방법
// 조건에 맞는 값을 제외한 결과를 반환값
// filterNotNull과는 다르게 filterNot은 새로운(별도의) List가 만들어지는 것은 아니다. 
val list : List<Int?> = listOf(1,2,null,3,4,5)
list2.filterNot { it == null }.map { Log.d("TAG", "notNull it " + it) }
// 출력 결과
/*
notNull it 1
notNull it 2
notNull it 3
notNull it 4
notNull it 5
*/


13. String Interpolation

- 단순 출력문
// Java
// 자바에서는 StringBuilder나 +를 사용하여 문자열 합침
Log.d("TAG", "A : " + a + ", B : " + b);

// Kotlin
// 코틀린에서는 String interpolation(보간법)가능.
// $ 이용해 변수를 바로 사용 가능.
Log.d("TAG", "A : $a, B : $b");

- 함수 구현
// Java
public String updateKeyword(String keyword) {
	return "Keyword : " + keyword;
}

// Kotlin
fun updateKeyword(val: String?) = "Keyword : $val"


14. Kotlin Lambdas

// Java
button.setOnclickListener(new View.OnclickListener() {
	@Override
	public void onClick(View view) {
		view.setAlpha(0.5f);
	}
});
// 버튼이 클릭될 경우 view(화면)에 투명도를 0.5로 설정하는 코드

// Kotlin 람다식 활용
button.setOnClickListener {
	view -> view.alpha = 0.5f
}
// {}가 있으면 람다식.
// onClick 함수에 view변수가 있기 때문에 'view -> ' 형태로 간단하게 변수를 받을 수 있다. 

// Kotlin 람다식 활용 + it 키워드 활용
button.setOnClickListener {
	it.alpha = 0.5f
}


15. Map의 key/value 출력

for ((k, v) in map) {
	println("$k -> $v")
}


16. 읽기 전용 list/map 생성하기

- Kotlin에서는 읽기만 가능한 list, map이 존재
- 읽기 전용 list/map은 add키워드가 존재하지 않음.

// Read-only List
val list = listOf("a", "b", "c")
// Read-only Map
val map = mapOf("a" to 1, "b" to 2, "c" to 3)

// forEach 이용한 출력
map.forEach { Log.i("TAG", "${it.key} -> ${it.value}")}
// for 이용한 출력
for ((k, v) in map) {
	Log.d("TAG", "$k -> $v")
}


17. 함수 - Infix notation(중위 표기법)

- Infix notation을 사용하는 경우
- this 키워드로 Int. 값 접근이 가능하다. 

fun Int.max(x: Int) :
	Int = if (this >x) this else x
1.max(15)
// 결과 : 15

infix fun Int.max(x: Int) :
	Int = if (this > x) this else x
1 max 15
// 결과 : 15

- Infix notation 활용법
fun Bitmap?.createBlurImage(context: Context, radius: Float = 25.0f):Bitmap? {
	return this?.let {
		return bitmap
	}
}

// Java
Bitmap bitmap = null;
RenderScriptUtilKt.createBlurImage(bitmap, context, 25.0f);

// Kotlin
val bitmap: Bitmap? = null
bitmap.createBlurImage(context)

